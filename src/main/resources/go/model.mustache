package {{packageName}}

import (
	"net/http"
	"github.com/go-openapi/runtime"
	"github.com/eaglesakura/swagger-go-core"
)

{{#models}}{{#imports}}
import ({{/imports}}{{#imports}}
	"{{import}}"{{/imports}}{{#imports}}
)
{{/imports}}{{#model}}{{#description}}


{{#vars}}{{#isEnum}}
const (
    {{#allowableValues}}{{#values}}
     {{classname}}_{{datatypeWithEnum}}_{{.}} string = "{{.}}"{{/values}}
     {{/allowableValues}}
){{/isEnum}}{{/vars}}

// {{{description}}}{{/description}}
type {{classname}} struct {
{{#vars}}{{#description}}
	// {{{description}}}{{/description}}
	{{name}} *{{{datatype}}} `json:"{{baseName}}{{^required}},omitempty{{/required}}"`
{{/vars}}
}

func (it *{{classname}}) Valid(factory swagger.ValidatorFactory) bool {
    {{#vars}}
    if(!factory.NewValidator(it.{{name}}, it.{{name}} == nil).{{#required}}Required(true).{{/required}}{{#pattern}}Pattern("{{pattern}}").{{/pattern}}{{#minLength}}MinLength({{minLength}}).{{/minLength}}{{#maxLength}}MinLength({{maxLength}}).{{/maxLength}}
                Valid(factory)) {
        return false;
    }
    {{/vars}}

    return true
}

func (it *{{classname}}) WriteResponse(writer http.ResponseWriter, producer runtime.Producer) {
	writer.WriteHeader(200)
	if err := producer.Produce(writer, it); err != nil || !it.Valid()  {
		panic(err) // let the recovery middleware deal with this
	}
}

{{/model}}{{/models}}
